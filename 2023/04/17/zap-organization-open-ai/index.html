<!DOCTYPE html><html lang="en"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Zap Organization/Folder Name Suggestion using OpenAI | Dong Hu</title><meta name="description" content=""><meta itemprop="name" content="Dong Hu"><meta itemprop="description" content="This is project based off a sandbox to experiment with AI-powered search for the Zapier&#39;s 2023 Q2 Hackweek."><meta itemprop="image" content="http://chaodonghu.github.io/assets/images/personal_photo.jpg"><meta property="og:url" content="http://chaodonghu.github.io/2023/04/17/zap-organization-open-ai/"><meta property="og:type" content="website"><meta property="og:title" content="Zap Organization/Folder Name Suggestion using OpenAI | Dong Hu"><meta property="og:site_name" content="Dong Hu"><meta property="og:description" content="This is project based off a sandbox to experiment with AI-powered search for the Zapier&#39;s 2023 Q2 Hackweek."><meta property="og:image" content="http://chaodonghu.github.io/assets/images/personal_photo.jpg"><meta name="twitter:url" content="http://chaodonghu.github.io/2023/04/17/zap-organization-open-ai/"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Zap Organization/Folder Name Suggestion using OpenAI | Dong Hu"><meta name="twitter:site" content="Dong Hu"><meta name="twitter:description" content="This is project based off a sandbox to experiment with AI-powered search for the Zapier&#39;s 2023 Q2 Hackweek."><meta property="twitter:image" content="http://chaodonghu.github.io/assets/images/personal_photo.jpg"><link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico"><link rel="stylesheet" href="/assets/css/app.min.css"><link rel="alternate" type="application/rss+xml" title="Dong Hu" href="/feed.xml"><link rel="canonical" href="/2023/04/17/zap-organization-open-ai/"> <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"/></script></head><body id="zap-organization-folder-name-suggestion-using-openai" class="post-layout"><header class="header"> <a class="header__title" href="http://chaodonghu.github.io/">Dong Hu</a><nav><ul class="header__list"><li class="header__item"><a href="/posts" class="header__link">Projects</a></li></ul></nav></header><main class="main_class"><div class="post"><article itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting"><div class="post__header section-padding"><div class="grid-small"><h2 itemprop="name headline">Zap Organization/Folder Name Suggestion using OpenAI</h2><time class="post__date" datetime="2023-04-17T00:00:00-04:00" itemprop="datePublished">17 Apr 2023</time></div></div><div class="post__content section-padding"><div class="grid"><div id="markdown" itemprop="articleBody"><h4 id="problems">Problem(s)</h4><p>I worked on the manage team at Zapier and a big problem we dealt with was Zap folders! Many group zaps into folders by workflow, so related Zaps are next to each other. What if we could look at the ZDL &amp; titles of all the zaps group them by similarity and summarize what workflow these zaps target by suggesting a folder name suggestion for the grouping?</p><p>Based on a user input of how many folders or categories they want their zaps to be grouped into. We can leverage AI to look into the relationships for an account’s zaps, via intrinsic properties of their title, description and ZDL steps, and allow AI to form logical relationships between zaps for grouping.</p><h4 id="solution">Solution</h4><blockquote><p>The concept of Embeddings can be abstract, but suffice to say an embedding is an information dense representation of the semantic meaning of a piece of text.</p></blockquote><p>The OpenAI documentation states that embeddings are commonly used for <a href="https://platform.openai.com/docs/guides/embeddings/what-are-embeddings">clustering and recommendations</a> which fits the main purpose of what I was trying to achieve. Clustering can be used to discover valuable, hidden groups of semantically similar sentences within bodies of data. The goal for me this hackathon was to explore these concepts and thankfully OpenAI provides an example of <a href="https://github.com/openai/openai-cookbook/blob/main/examples/Clustering.ipynb">clustering utilizing food review embeddings</a> done in python which I tried to replicate</p><h5 id="step-1-fetch-zaps-and-embed-them">Step 1: Fetch zaps and embed them</h5><p>The first step was to fetch all the zaps for the account and create an embedding for each zap utilizing the <a href="https://platform.openai.com/docs/guides/embeddings/what-are-embeddings">OpenAI embedding API endpoint</a>. In the code I’ve limited # of zaps fetched to 500.</p><p><img src="https://cdn.zappy.app/cc003154b44c7883c311ac1596d63d46.png" alt="" /></p><p>Each embedding returned back is in <a href="https://platform.openai.com/docs/guides/embeddings/second-generation-models">1536 dimensions</a> by default. I would have liked to store these embeddings into a vector database like pinecone but didn’t have time to implement the means of indexing then retrieving them.</p><h5 id="step-2-convert-dimensionality">Step 2: Convert dimensionality</h5><p>To visualize the embeddings in a 2D plot I had to convert each 1536 dimension vector into a 2 dimension vector. Following this <a href="https://github.com/openai/openai-cookbook/blob/main/examples/Visualizing_embeddings_in_2D.ipynb">guide</a>, I utilized t-SNE decomposition and a open source <a href="https://github.com/scienceai/tsne-js">tsne-js package</a> to reduce this dimensionality.</p><p><em>1536 Dimensions</em></p><p><img src="https://cdn.zappy.app/301ce6c9dbbadcd7c9e4785af5579e7d.png" alt="" /></p><p><em>2 Dimensions</em></p><p><img src="https://cdn.zappy.app/195ebd0357af3bcb6f0ed195382fea57.png" alt="" /></p><h5 id="step-3-cluster">Step 3: Cluster</h5><p>I then had figure out how to cluster the data into groups. I utilized k-means clustering which is a algorithm that allows data to be grouped with varying granularity and sizes to discover the categories of groups in the unlabeled dataset on its own without the need for any training (<a href="https://www.javatpoint.com/k-means-clustering-algorithm-in-machine-learning#:~:text=K%2DMeans%20Clustering%20is%20an%20Unsupervised%20Learning%20algorithm%2C%20which%20groups,three%20clusters%2C%20and%20so%20on.">source</a>). The “K” in k-means refers to the the number value we want to divide the dataset into (in this case the “# of categories”). I borrowed the code written in this <a href="https://medium.com/geekculture/implementing-k-means-clustering-from-scratch-in-javascript-13d71fbcb31e">article</a> for implementing k-means clustering from scratch in javascript.</p><p>The k-means algorithm returned back a data structure containing an array of clusters (which equate to k/# of categories) with each cluster consisting of the points that make up that cluster and a 2-d coordinate of the centroid (mean coordinate of that cluster)</p><p><img src="https://cdn.zappy.app/90bfe79e0b5764ddaf09af290a33d77d.png" alt="" /></p><p>With these coordinates we can then plot it to visualize the clusters</p><p><img src="https://cdn.zappy.app/8d3b82ebd8fc957bc764bfa580a9e022.png" alt="" /></p><p>Each red point is a 2-d coordinate of the zap embedding and each green point is the mean of that cluster, in this case I passed in k=5 and 5 clusters are visualized in space</p><h5 id="step-4-ask-openai-to-create-a-recommendation-on-how-to-name-each-cluster">Step 4: Ask OpenAI to create a recommendation on how to name each cluster</h5><p>For each cluster/grouping of zaps we then give OpenAI the zap title, zap description and zdl steps for each zap with the prompt</p><blockquote><p>You are a Zapier expert. Use this array of zaps which have been group using the kMeans algorithm and each zap consisting of a title, description and ZDL steps and come up with a folder title to summarize each group of zaps. Each folder title should ideally be less than 100 words.</p></blockquote><h5 id="groupings">Groupings</h5><p><img src="https://cdn.zappy.app/28a36bb749ec48d5cb981b386b3bdd7b.png" alt="" /></p><p>The result is groups of zaps organized by embedding along with a suggested folder name for each grouping!</p><p><img src="https://cdn.zappy.app/157e79806e22e632d9ee623b9e05fb06.png" alt="" /></p><p><img src="https://cdn.zappy.app/6e96888f1de40bc4ea13516f97d1dc9e.png" alt="" /></p><p><img src="https://cdn.zappy.app/6c4a1140269f55e14d3e14617de3d752.png" alt="" /></p><h4 id="lessons-learned">Lessons Learned</h4><ul><li>It helped to understand the similarities between the embeddings by visualizing the clusters so I spent a good chunk of time trying to understand how to convert the dimensionality of the embeddings from 1536 to 2 in order to plot the embeddings. I still don’t fully understand how the t-SNE algorithm works but the OpenAI cookbook recommends it</li><li>k-means algorithm was another concept that I used in this project but don’t fully grasp how it works, it provided the ability to implement clustering/group the embeddings but I would like to explore more into how the algorithm compares values</li><li>I would have liked to play around with indexing and retrieving the embeddings from a vector database such as pinecone. When the dataset becomes extremely large (which I haven’t tested with) I predict that the in-memory storage of embeddings and zaps that I played around will probably timeout</li><li>The documentation on OpenAI is fairly new so trying to translate and follow a guide written in python to javascript was difficult but fun to troubleshoot</li></ul><h4 id="recommendation--status">Recommendation / Status</h4><p>This project is very bare bones (the UI/UX needs alot more work :sweat_smile:) but it does provide a proof of concept of what AI can do in terms of categorizing a large dataset and once given a prompt it has the ability to synthesize a name for each grouping. This work could provide a good base to work off in terms of giving folder name suggestions for users that have a bunch of zaps in their home folders that could benefit from being categorized into separate subfolders. :thinking:</p><h4 id="tech-stack">Tech Stack</h4><ul><li><a href="https://nextjs.org">Next.js</a></li><li><a href="https://next-auth.js.org">NextAuth.js</a></li><li><a href="https://platform.openai.com/docs/api-reference">openai</a></li><li><a href="https://www.pinecone.io/">pinecone</a></li></ul></div></div></div></article></div></main><footer class="footer section-padding"><div class="grid"><hr class="sep--white"/><div class="footer__container"><ul class="footer__links"><li> <a href="https://www.instagram.com/chaodonghu/" target="_blank" ><i class="fa fa-instagram"></i ></a></li><li> <a href="https://www.linkedin.com/in/dong-h/" target="_blank" ><i class="fa fa-linkedin"></i ></a></li><li> <a href="https://github.com/chaodonghu" target="_blank" ><i class="fa fa-github"></i ></a></li><li> <a href="https://gitlab.com/chaodonghu" target="_blank" ><i class="fa fa-gitlab"></i ></a></li><li> <a href="https://medium.com/@donghu" target="_blank" ><i class="fa fa-medium"></i ></a></li></ul></div></div></footer><script src="/assets/js/app.min.js"></script></body>
  